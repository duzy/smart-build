#!/bin/bash
SMART=$(readlink -f $0)
SMARTROOT=$(dirname $(dirname $SMART))
[[ -d $SMARTROOT ]] || {
    echo "SMARTROOT is incorrect: \"$SMARTROOT\""
    exit -1
}

SMARTMAIN=$SMARTROOT/load/main.mk
[[ -f $SMARTMAIN ]] || {
    echo "$SMARTMAIN not exists"
    exit -1
}

export SMART
export SMARTROOT

exec make -r -f $SMARTMAIN $@
